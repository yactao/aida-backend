{"version":3,"file":"StorageRequestFailureDetailsParserPolicy.js","sourceRoot":"","sources":["../../../src/policies/StorageRequestFailureDetailsParserPolicy.ts"],"names":[],"mappings":";AAAA,uCAAuC;AACvC,kCAAkC;;;AAkBlC,4FA0BC;AAnCD;;GAEG;AACU,QAAA,4CAA4C,GACvD,0CAA0C,CAAC;AAE7C;;GAEG;AACH,SAAgB,wCAAwC;IACtD,OAAO;QACL,IAAI,EAAE,oDAA4C;QAClD,KAAK,CAAC,WAAW,CAAC,OAAwB,EAAE,IAAiB;YAC3D,IAAI,CAAC;gBACH,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,CAAC;gBACrC,OAAO,QAAQ,CAAC;YAClB,CAAC;YAAC,OAAO,GAAG,EAAE,CAAC;gBACb,IACE,OAAO,GAAG,KAAK,QAAQ;oBACvB,GAAG,KAAK,IAAI;oBACX,GAAW,CAAC,QAAQ;oBACpB,GAAW,CAAC,QAAQ,CAAC,UAAU,EAChC,CAAC;oBACD,IACG,GAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,IAAI,KAAK,oBAAoB;wBAC7D,GAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,UAAU,KAAK,cAAc,EAC9D,CAAC;wBACA,GAAW,CAAC,OAAO;4BAClB,8MAA8M,CAAC;oBACnN,CAAC;gBACH,CAAC;gBACD,MAAM,GAAG,CAAC;YACZ,CAAC;QACH,CAAC;KACF,CAAC;AACJ,CAAC","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport type {\n  PipelineRequest,\n  PipelineResponse,\n  SendRequest,\n  PipelinePolicy,\n} from \"@azure/core-rest-pipeline\";\n\n/**\n * The programmatic identifier of the StorageRequestFailureDetailsParserPolicy.\n */\nexport const storageRequestFailureDetailsParserPolicyName =\n  \"storageRequestFailureDetailsParserPolicy\";\n\n/**\n * StorageRequestFailureDetailsParserPolicy\n */\nexport function storageRequestFailureDetailsParserPolicy(): PipelinePolicy {\n  return {\n    name: storageRequestFailureDetailsParserPolicyName,\n    async sendRequest(request: PipelineRequest, next: SendRequest): Promise<PipelineResponse> {\n      try {\n        const response = await next(request);\n        return response;\n      } catch (err) {\n        if (\n          typeof err === \"object\" &&\n          err !== null &&\n          (err as any).response &&\n          (err as any).response.parsedBody\n        ) {\n          if (\n            (err as any).response.parsedBody.code === \"InvalidHeaderValue\" &&\n            (err as any).response.parsedBody.HeaderName === \"x-ms-version\"\n          ) {\n            (err as any).message =\n              \"The provided service version is not enabled on this storage account. Please see https://learn.microsoft.com/rest/api/storageservices/versioning-for-the-azure-storage-services for additional information.\\n\";\n          }\n        }\n        throw err;\n      }\n    },\n  };\n}\n"]}