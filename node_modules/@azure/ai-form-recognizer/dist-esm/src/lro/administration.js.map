{"version":3,"file":"administration.js","sourceRoot":"","sources":["../../../src/lro/administration.ts"],"names":[],"mappings":"AAAA,uCAAuC;AACvC,kCAAkC;AAIlC,OAAO,EAAE,mBAAmB,EAAE,MAAM,UAAU,CAAC;AA+D/C;;;GAGG;AACH,MAAM,CAAC,KAAK,UAAU,4BAA4B,CAChD,QAAoC;;IAEpC,OAAO;QACL,WAAW,EAAE,QAAQ,CAAC,WAAW;QACjC,MAAM,EAAE,QAAQ,CAAC,MAAM;QACvB,UAAU,EAAE,QAAQ,CAAC,UAAU;QAC/B,gBAAgB,EAAE,MAAA,QAAQ,CAAC,gBAAgB,mCAAI,CAAC;QAChD,aAAa,EAAE,QAAQ,CAAC,aAAa;QACrC,SAAS,EAAE,QAAQ,CAAC,SAAS;QAC7B,KAAK,EAAE,QAAQ,CAAC,KAAK,IAAI,IAAI,mBAAmB,CAAC,QAAQ,CAAC,KAAK,CAAC;QAChE,WAAW,EAAE,QAAQ,CAAC,MAAM,KAAK,UAAU;QAC3C,WAAW,EAAE,QAAQ,CAAC,MAAM,KAAK,WAAW;QAC5C,SAAS,EAAE,QAAQ,CAAC,MAAM,KAAK,YAAY;QAC3C,IAAI,EAAE,QAAQ,CAAC,IAAI;QACnB,MAAM,EAAE,QAAQ,CAAC,MAAM;KACxB,CAAC;AACJ,CAAC","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport { PollOperationState, PollerLike } from \"@azure/core-lro\";\nimport { OperationOptions } from \"@azure/core-client\";\nimport { FormRecognizerError } from \"../error\";\nimport {\n  DocumentModelDetails,\n  OperationStatus,\n  DocumentModelBuildOperationDetails,\n  DocumentModelCopyToOperationDetails,\n  DocumentModelComposeOperationDetails,\n} from \"../generated\";\nimport { PollerOptions } from \"../options/PollerOptions\";\n\n/**\n * The state of a model creation operation.\n */\nexport interface DocumentModelOperationState extends PollOperationState<DocumentModelDetails> {\n  /**\n   * The status of the operation. One of:\n   *\n   * - \"notStarted\"\n   * - \"running\"\n   * - \"succeeded\"\n   * - \"failed\"\n   * - \"canceled\"\n   */\n  status: OperationStatus;\n\n  /**\n   * The API version used to train this model.\n   */\n  apiVersion?: string;\n\n  /**\n   * The unique ID of this operation.\n   */\n  operationId: string;\n\n  /**\n   * A number between 0 and 100 representing the progress of the operation.\n   */\n  percentCompleted: number;\n\n  /**\n   * The Date and Time that the operation was created.\n   */\n  createdOn: Date;\n\n  /**\n   * The date & time that the operation state was last modified.\n   */\n  lastUpdatedOn: Date;\n\n  /**\n   * Additional, user-defined key-value pairs associated with the model as metadata.\n   */\n  tags?: Record<string, string>;\n}\n\n// The generated type for GetOperationResult is not ideal here. This assertion is just kicking the can down the road but\n// it's about the only thing we can do to actually access the common `result` property.\nexport type DocumentModelBuildResponse =\n  | DocumentModelBuildOperationDetails\n  | DocumentModelCopyToOperationDetails\n  | DocumentModelComposeOperationDetails;\n\n/**\n * Convert an operation result into a training poller state.\n * @internal\n */\nexport async function toTrainingPollOperationState(\n  response: DocumentModelBuildResponse\n): Promise<DocumentModelOperationState> {\n  return {\n    operationId: response.operationId,\n    status: response.status,\n    apiVersion: response.apiVersion,\n    percentCompleted: response.percentCompleted ?? 0,\n    lastUpdatedOn: response.lastUpdatedOn,\n    createdOn: response.createdOn,\n    error: response.error && new FormRecognizerError(response.error),\n    isCancelled: response.status === \"canceled\",\n    isCompleted: response.status === \"succeeded\",\n    isStarted: response.status !== \"notStarted\",\n    tags: response.tags,\n    result: response.result,\n  };\n}\n\n/**\n * A long-running operation (poller) that tracks the state of a model creation operation, eventually producing a\n * {@link DocumentModelDetails}.\n */\nexport type DocumentModelPoller = PollerLike<DocumentModelOperationState, DocumentModelDetails>;\n\n/**\n * Defines a training operation.\n * @internal\n */\nexport interface TrainingOperationDefinition {\n  /**\n   * A function to start the operation, producing an operationLocation.\n   */\n  start: () => Promise<{ operationLocation?: string }>;\n  /**\n   * Options for the poller and requests.\n   */\n  options: PollerOptions<DocumentModelOperationState> & OperationOptions;\n}\n"]}